(()=>{var f=Object.defineProperty;var n=(i,e)=>f(i,"name",{value:e,configurable:!0});var a="pf2e-arp";function R(...i){let[e,t]=i;return e=`${a}.${e}`,t?game.i18n.format(e,t):game.i18n.localize(e)}n(R,"localize");function y(i,e,t,s){let u=typeof e=="string"?e:"info",p=typeof e=="object"?e:typeof t=="object"?t:void 0,m=typeof e=="boolean"?e:typeof t=="boolean"?t:s??!1;ui.notifications.notify(R(i,p),u,{permanent:m})}n(y,"notify");function c(...i){let[e,t,s]=i;y(e,"info",t,s)}n(c,"info");function r(i,e,t="WRAPPER"){return libWrapper.register(a,i,e,t)}n(r,"registerWrapper");var P="CONFIG.PF2E.Item.documentClasses.weapon.prototype.prepareBaseData",E="CONFIG.PF2E.Item.documentClasses.weapon.prototype.prepareDerivedData",h="CONFIG.PF2E.Item.documentClasses.armor.prototype.prepareBaseData",g="CONFIG.PF2E.Item.documentClasses.armor.prototype.prepareDerivedData",A=["Compendium.pf2e.equipment-srd.Item.ZhxxqYpVdVx0jSMm"];Hooks.once("init",()=>{r(P,d,"WRAPPER"),r(E,D,"WRAPPER"),r(h,C,"WRAPPER"),r(g,W,"WRAPPER")});Hooks.once("ready",()=>{game.user.isGM&&game.settings.get("pf2e","automaticBonusVariant")!=="noABP"&&(game.settings.set("pf2e","automaticBonusVariant","noABP"),c("forceVariant"))});function o(i,e=!1){return i&&!i.getFlag("pf2e","disableABP")&&(!e||i.isOfType("character"))}n(o,"isValidActor");function l(i){let e=i._source.system.traits.value;return!e.includes("alchemical")&&!e.includes("bomb")&&!A.includes(i.sourceId)}n(l,"isValidWeapon");function d(i){let e=this.actor;if(!o(e,!0)||!l(this))return i();let t=e.level,s=this._source.system.traits.value;if(s.includes("alchemical")&&s.includes("bomb"))return i();this.system.potencyRune.value=t<2?null:t<10?1:t<16?2:3,this.system.strikingRune.value=t<4?null:t<12?"striking":t<19?"greaterStriking":"majorStriking",i()}n(d,"onPrepareWeaponData");var v={1:35,2:935,3:8935,4:8935},_={striking:65,greaterStriking:1065,majorStriking:31065};function D(i){if(i(),!o(this.actor)||this.isSpecific||!l(this))return;let e=this.price.value.goldValue,t=this.system.potencyRune.value;t&&(e-=v[t]);let s=this.system.strikingRune.value;s&&(e-=_[s]),(t||s)&&!this.system.runes.property.length&&(e+=new game.pf2e.Coins(this._source.system.price.value).goldValue),this.system.price.value=new game.pf2e.Coins({gp:e})}n(D,"onPrepareWeaponDerivedData");function C(i){if(this.isShield)return i();let e=this.actor;if(!o(e,!0))return i();let t=e.level;this.system.potencyRune.value=t<5?null:t<11?1:t<18?2:3,this.system.resiliencyRune.value=t<8?null:t<14?"resilient":t<20?"greaterResilient":"majorResilient",i()}n(C,"onPrepareArmorData");var I={1:160,2:1060,3:20560,4:20560},O={resilient:340,greaterResilient:3440,majorResilient:49440};function W(i){if(i(),!o(this.actor)||this.isSpecific||this.isShield)return;let e=this.price.value.goldValue,t=this.system.potencyRune.value;t&&(e-=I[t]);let s=this.system.resiliencyRune.value;s&&(e-=O[s]),(t||s)&&!this.system.runes.property.length&&(e+=new game.pf2e.Coins(this._source.system.price.value).goldValue),this.system.price.value=new game.pf2e.Coins({gp:e})}n(W,"onPrepareArmorDerivedData");})();
//# sourceMappingURL=main.js.map
