(()=>{var p=Object.defineProperty;var n=(i,t)=>p(i,"name",{value:t,configurable:!0});var a="pf2e-arp";function m(...i){let[t,e]=i;return t=`${a}.${t}`,e?game.i18n.format(t,e):game.i18n.localize(t)}n(m,"localize");function f(i,t,e,s){let o=typeof t=="string"?t:"info",l=typeof t=="object"?t:typeof e=="object"?e:void 0,u=typeof t=="boolean"?t:typeof e=="boolean"?e:s??!1;ui.notifications.notify(m(i,l),o,{permanent:u})}n(f,"notify");function c(...i){let[t,e,s]=i;f(t,"info",e,s)}n(c,"info");function r(i,t,e="WRAPPER"){return libWrapper.register(a,i,t,e)}n(r,"registerWrapper");var R="CONFIG.PF2E.Item.documentClasses.weapon.prototype.prepareBaseData",y="CONFIG.PF2E.Item.documentClasses.weapon.prototype.prepareDerivedData",P="CONFIG.PF2E.Item.documentClasses.armor.prototype.prepareBaseData",h="CONFIG.PF2E.Item.documentClasses.armor.prototype.prepareDerivedData";Hooks.once("init",()=>{r(R,E,"WRAPPER"),r(y,v,"WRAPPER"),r(P,_,"WRAPPER"),r(h,C,"WRAPPER")});Hooks.once("ready",()=>{game.user.isGM&&game.settings.get("pf2e","automaticBonusVariant")!=="noABP"&&(game.settings.set("pf2e","automaticBonusVariant","noABP"),c("forceVariant"))});function E(i){let t=this.actor;if(!t||!t.isOfType("character"))return i();let e=t.level,s=this._source.system.traits.value;if(s.includes("alchemical")&&s.includes("bomb"))return i();this.system.potencyRune.value=e<2?null:e<10?1:e<16?2:3,this.system.strikingRune.value=e<4?null:e<12?"striking":e<19?"greaterStriking":"majorStriking",i()}n(E,"onPrepareWeaponData");var g={1:35,2:935,3:8935,4:8935},A={striking:65,greaterStriking:1065,majorStriking:31065};function v(i){i();let t=this._source.system.traits.value;if(!this.actor||this.isSpecific||t.includes("alchemical")&&t.includes("bomb"))return;let e=this.price.value.goldValue,s=this.system.potencyRune.value;s&&(e-=g[s]);let o=this.system.strikingRune.value;o&&(e-=A[o]),(s||o)&&!this.system.runes.property.length&&(e+=new game.pf2e.Coins(this._source.system.price.value).goldValue),this.system.price.value=new game.pf2e.Coins({gp:e})}n(v,"onPrepareWeaponDerivedData");function _(i){if(this.isShield)return i();let t=this.actor;if(!t||!t.isOfType("character"))return i();let e=t.level;this.system.potencyRune.value=e<5?null:e<11?1:e<18?2:3,this.system.resiliencyRune.value=e<8?null:e<14?"resilient":e<20?"greaterResilient":"majorResilient",i()}n(_,"onPrepareArmorData");var D={1:160,2:1060,3:20560,4:20560},d={resilient:340,greaterResilient:3440,majorResilient:49440};function C(i){if(i(),!this.actor||this.isSpecific||this.isShield)return;let t=this.price.value.goldValue,e=this.system.potencyRune.value;e&&(t-=D[e]);let s=this.system.resiliencyRune.value;s&&(t-=d[s]),(e||s)&&!this.system.runes.property.length&&(t+=new game.pf2e.Coins(this._source.system.price.value).goldValue),this.system.price.value=new game.pf2e.Coins({gp:t})}n(C,"onPrepareArmorDerivedData");})();
//# sourceMappingURL=main.js.map
